# Web Interface and Cloud Hosting Specification

## 12. Web Interface Design

### 12.1 Interface Overview

**Purpose:** Provide a real-time dashboard for monitoring agent activity, reviewing outputs, and approving actions.

**Core views:**
1. **Dashboard** - Overview of all projects and agent activity
2. **Task Queue** - Items waiting for human input/approval
3. **Agent Activity Stream** - Live log of what agent is doing
4. **Project View** - Kanban/table/list of project artefacts and status
5. **Approval Workflow** - Review and approve/reject agent outputs

### 12.2 Dashboard View

**Layout:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Claude PM Workbench                    [User: Damien] [âš™ï¸]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ðŸ“Š Active Projects (3)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ My Career      â”‚ BCM Website    â”‚ QRIDA Security â”‚       â”‚
â”‚  â”‚ Universe       â”‚ Refresh        â”‚ Uplift         â”‚       â”‚
â”‚  â”‚                â”‚                â”‚                â”‚       â”‚
â”‚  â”‚ ðŸŸ¡ Amber       â”‚ ðŸŸ¢ Green       â”‚ ðŸ”´ Red         â”‚       â”‚
â”‚  â”‚ 2 pending      â”‚ 0 pending      â”‚ 5 pending      â”‚       â”‚
â”‚  â”‚ Last: 15m ago  â”‚ Last: 2h ago   â”‚ Last: 5m ago   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â”‚  âš ï¸  Pending Approval (7)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ”´ P0 - API Vendor EOL Risk Escalation              â”‚   â”‚
â”‚  â”‚     My Career Universe â€¢ 15m ago                     â”‚   â”‚
â”‚  â”‚     [Review Brief] [Approve] [Reject]                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ðŸŸ¡ P1 - Exec Status Report (2025-02-03)             â”‚   â”‚
â”‚  â”‚     My Career Universe â€¢ 2h ago                      â”‚   â”‚
â”‚  â”‚     [Review Report] [Approve] [Edit & Approve]       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ðŸŸ¡ P1 - New Dependency Detected: Platform API       â”‚   â”‚
â”‚  â”‚     My Career Universe â€¢ 45m ago                     â”‚   â”‚
â”‚  â”‚     [View Details] [Approve] [Reject]                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  ðŸ“ˆ Activity Summary (Last 24h)                              â”‚
â”‚  â€¢ 12 actions executed                                       â”‚
â”‚  â€¢ 7 awaiting approval                                       â”‚
â”‚  â€¢ 3 auto-executed (low-stakes)                              â”‚
â”‚  â€¢ 2 risks detected                                          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Real-time updates (WebSocket connection)
- Priority colour coding (Red P0, Amber P1, Blue P2/P3)
- Quick actions (Approve/Reject without leaving dashboard)
- Time since last activity
- Project health indicators

### 12.3 Task Queue View

**Layout:** Kanban board with columns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Task Queue - My Career Universe                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ðŸ”´ Urgent         ðŸŸ¡ Review Soon      ðŸ”µ Low Priority       â”‚
â”‚  (P0)              (P1)                (P2/P3)               â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ API Vendor   â”‚  â”‚ Exec Status  â”‚  â”‚ Backlog      â”‚      â”‚
â”‚  â”‚ EOL Risk     â”‚  â”‚ Report       â”‚  â”‚ Health Check â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ 15m ago      â”‚  â”‚ 2h ago       â”‚  â”‚ 1d ago       â”‚      â”‚
â”‚  â”‚ [Review]     â”‚  â”‚ [Review]     â”‚  â”‚ [Review]     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                    â”‚ Meeting Prep â”‚  â”‚ Artefact     â”‚      â”‚
â”‚                    â”‚ Steering     â”‚  â”‚ Maintenance  â”‚      â”‚
â”‚                    â”‚              â”‚  â”‚              â”‚      â”‚
â”‚                    â”‚ 3h ago       â”‚  â”‚ Auto-done    â”‚      â”‚
â”‚                    â”‚ [Review]     â”‚  â”‚ [View Log]   â”‚      â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Alternative: Table View**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Task Queue - My Career Universe              [Kanban|Table] â”‚
â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Pri â”‚ Task               â”‚ Type â”‚ Created â”‚ Status â”‚ Action â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ”´  â”‚ API Vendor EOL     â”‚ Risk â”‚ 15m ago â”‚ Review â”‚ [Open] â”‚
â”‚ ðŸŸ¡  â”‚ Exec Status Report â”‚ Rep. â”‚ 2h ago  â”‚ Review â”‚ [Open] â”‚
â”‚ ðŸŸ¡  â”‚ Meeting Prep       â”‚ Prep â”‚ 3h ago  â”‚ Review â”‚ [Open] â”‚
â”‚ ðŸŸ¡  â”‚ Dependency: API    â”‚ Dep. â”‚ 45m ago â”‚ Review â”‚ [Open] â”‚
â”‚ ðŸ”µ  â”‚ Backlog Health     â”‚ Main â”‚ 1d ago  â”‚ Review â”‚ [Open] â”‚
â”‚ ðŸ”µ  â”‚ Artefact Archive   â”‚ Main â”‚ 1d ago  â”‚ Done   â”‚ [View] â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Drag and drop to prioritise
- Bulk actions (approve multiple)
- Filter by type, priority, project
- Sort by date, priority, status
- Search

### 12.4 Agent Activity Stream

**Layout:** Real-time feed of agent actions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Activity Stream                          [Live] [â¸ï¸]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ðŸ”´ 11:47:23 - High Risk Detected                            â”‚
â”‚  My Career Universe                                           â”‚
â”‚  â”œâ”€ Read raid_log.md (detected R001: API vendor EOL)        â”‚
â”‚  â”œâ”€ Executed risk_escalation skill                           â”‚
â”‚  â”œâ”€ Generated escalation brief                               â”‚
â”‚  â””â”€ âš ï¸  Awaiting approval                                    â”‚
â”‚     [Review Brief]                                            â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                               â”‚
â”‚  ðŸŸ¢ 09:15:32 - Delivery State Updated                        â”‚
â”‚  My Career Universe                                           â”‚
â”‚  â”œâ”€ Jira sprint closed (Sprint 12)                          â”‚
â”‚  â”œâ”€ Updated delivery_state.md (32 points delivered)         â”‚
â”‚  â””â”€ âœ“ Auto-executed (logged)                                â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                               â”‚
â”‚  ðŸŸ¡ 09:00:15 - Exec Status Report Generated                  â”‚
â”‚  My Career Universe                                           â”‚
â”‚  â”œâ”€ Triggered by schedule (Monday 9am)                       â”‚
â”‚  â”œâ”€ Read delivery_state, RAID, milestones, decisions        â”‚
â”‚  â”œâ”€ Generated exec_status_report                             â”‚
â”‚  â””â”€ âš ï¸  Awaiting approval                                    â”‚
â”‚     [Review Report] [Approve] [Edit]                         â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                               â”‚
â”‚  ðŸ”µ 08:30:42 - Archived Resolved Risks                       â”‚
â”‚  My Career Universe                                           â”‚
â”‚  â”œâ”€ Detected 3 resolved risks in raid_log.md                â”‚
â”‚  â”œâ”€ Moved to archive/raid_log_archive.md                    â”‚
â”‚  â””â”€ âœ“ Auto-executed (logged)                                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Real-time updates (streaming)
- Expandable details for each action
- Filter by project, priority, skill
- Pause stream to review
- Export log

### 12.5 Project View

**Artefact Explorer with Status**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  My Career Universe                            ðŸŸ¡ Amber      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ðŸ“ Strategic                                                â”‚
â”‚  â”œâ”€ âœ“ project_brief.md                  Updated: 2w ago    â”‚
â”‚  â”œâ”€ âœ“ stakeholders.md                   Updated: 1w ago    â”‚
â”‚  â””â”€ âœ“ success_metrics.md                Updated: 3w ago    â”‚
â”‚                                                               â”‚
â”‚  ðŸ“ Risk and Dependencies                                    â”‚
â”‚  â”œâ”€ âš ï¸  raid_log.md                     Updated: 15m ago   â”‚
â”‚  â”‚   â””â”€ 1 high risk, 2 medium risks                        â”‚
â”‚  â”œâ”€ âš ï¸  dependencies.md                 Updated: 45m ago   â”‚
â”‚  â”‚   â””â”€ 1 blocker (Platform API access)                    â”‚
â”‚  â””â”€ âœ“ constraints.md                    Updated: 2w ago    â”‚
â”‚                                                               â”‚
â”‚  ðŸ“ Delivery Tracking                                        â”‚
â”‚  â”œâ”€ âœ“ roadmap.md                        Updated: 1w ago    â”‚
â”‚  â”œâ”€ âœ“ delivery_state.md                 Updated: 2h ago    â”‚
â”‚  â”‚   â””â”€ Sprint 12 complete, 32 points                      â”‚
â”‚  â””â”€ âš ï¸  backlog.md                      Updated: 1d ago    â”‚
â”‚      â””â”€ 2 items need acceptance criteria                   â”‚
â”‚                                                               â”‚
â”‚  ðŸ“ Decisions                                                â”‚
â”‚  â”œâ”€ âœ“ decisions.md                      Updated: 3d ago    â”‚
â”‚  â”‚   â””â”€ 12 decisions logged                                â”‚
â”‚  â””â”€ ðŸ“ adrs (2 records)                                     â”‚
â”‚                                                               â”‚
â”‚  ðŸ“ Outputs                                                  â”‚
â”‚  â”œâ”€ ðŸ“ status_reports (23 reports)                          â”‚
â”‚  â”œâ”€ ðŸ“ escalations (8 briefs)                               â”‚
â”‚  â”œâ”€ ðŸ“ meeting_prep (15 briefs)                             â”‚
â”‚  â””â”€ ðŸ“ briefs (34 structured briefs)                        â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Tree view of artefacts
- Status indicators (up-to-date, stale, warnings)
- Click to view/edit artefacts
- Version history
- Quick actions (archive, duplicate)

### 12.6 Approval Workflow View

**Detail view when reviewing an output**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸  Review Required: API Vendor EOL Risk Escalation         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Task: Risk Escalation                                       â”‚
â”‚  Project: My Career Universe                                 â”‚
â”‚  Priority: ðŸ”´ P0 (Critical)                                  â”‚
â”‚  Created: 2025-02-03 11:47:23 (15 minutes ago)               â”‚
â”‚  Skill: risk_escalation                                      â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                               â”‚
â”‚  Agent Summary:                                              â”‚
â”‚  Detected high-severity risk in RAID log (R001: API vendor  â”‚
â”‚  EOL). Generated escalation brief for steering committee.    â”‚
â”‚  Decision needed on vendor migration approach.                â”‚
â”‚                                                               â”‚
â”‚  Context Used:                                               â”‚
â”‚  â€¢ raid_log.md (detected new high-severity risk)            â”‚
â”‚  â€¢ dependencies.md (checked for related dependencies)        â”‚
â”‚  â€¢ milestones.md (identified impact on March launch)         â”‚
â”‚  â€¢ decisions.md (checked for related vendor decisions)       â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                               â”‚
â”‚  Generated Output:                                           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ # Risk Escalation Brief - API Vendor EOL               â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚ **Risk ID**: R001                                       â”‚â”‚
â”‚  â”‚ **Severity**: High                                      â”‚â”‚
â”‚  â”‚ **Detected**: 2025-02-03 11:45                          â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚ ## Summary                                              â”‚â”‚
â”‚  â”‚ Current API vendor (Vendor A) announced end-of-life    â”‚â”‚
â”‚  â”‚ in June 2025. Migration to alternative vendor required â”‚â”‚
â”‚  â”‚ to maintain platform functionality. March 2025 launch  â”‚â”‚
â”‚  â”‚ timeline at risk.                                       â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚ ## Impact                                               â”‚â”‚
â”‚  â”‚ - March launch may be delayed 2-4 weeks                â”‚â”‚
â”‚  â”‚ - Budget impact: $15-25k for migration                 â”‚â”‚
â”‚  â”‚ - Resource impact: 2 developers for 3 weeks            â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚ ## Options                                              â”‚â”‚
â”‚  â”‚ 1. Migrate to Vendor B (recommended)                   â”‚â”‚
â”‚  â”‚    - Cost: ~$18k, Timeline: 3 weeks                    â”‚â”‚
â”‚  â”‚ 2. Evaluate alternative vendors                        â”‚â”‚
â”‚  â”‚    - Cost: TBD, Timeline: 4-5 weeks                    â”‚â”‚
â”‚  â”‚ 3. Delay launch, build custom solution                 â”‚â”‚
â”‚  â”‚    - Cost: $40k+, Timeline: 8 weeks                    â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚ ## Recommendation                                       â”‚â”‚
â”‚  â”‚ Proceed with Vendor B migration. Initiate immediately  â”‚â”‚
â”‚  â”‚ to minimize launch delay. Adjust March timeline to     â”‚â”‚
â”‚  â”‚ mid-April.                                              â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚ ## Stakeholders for Decision                            â”‚â”‚
â”‚  â”‚ - Sarah (Product Lead): Timeline approval              â”‚â”‚
â”‚  â”‚ - Finance: Budget approval                              â”‚â”‚
â”‚  â”‚ - Legal: Vendor contract approval                       â”‚â”‚
â”‚  â”‚ - Tom (CTO): Technical sign-off                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                               â”‚
â”‚  Actions:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Approve â”‚ â”‚ âœï¸  Edit    â”‚ â”‚ âŒ Reject  â”‚ â”‚ ðŸ’¬ Notes â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  If approved, this brief will be:                            â”‚
â”‚  â€¢ Saved to /outputs/escalations/                            â”‚
â”‚  â€¢ Ready to send to steering committee                       â”‚
â”‚                                                               â”‚
â”‚  Comments/Notes:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [Add notes for agent learning or record decision...]    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions:**
- **Approve:** Accept output as-is, mark complete
- **Edit:** Open editor to modify, then approve
- **Reject:** Discard output, provide feedback for agent learning
- **Add Notes:** Record why approved/rejected for future reference

---

## 13. Cloud Hosting Architecture (Vercel)

### 13.1 Architecture Overview

**Stack:**
- **Frontend:** Next.js (React) hosted on Vercel
- **Backend:** Next.js API routes + serverless functions (Vercel)
- **Agent Runtime:** Separate service (AWS Lambda, Render, or Railway)
- **Database:** PostgreSQL (Neon, Supabase, or PlanetScale)
- **File Storage:** AWS S3 (encrypted) or Vercel Blob
- **Real-time:** WebSockets (Vercel, Pusher, or Ably)
- **Auth:** NextAuth.js with OAuth (Google, Microsoft)
- **Encryption:** AES-256 for files, TLS 1.3 for transport

**Why Vercel:**
- Excellent Next.js performance (built by same team)
- Global CDN for fast load times
- Serverless functions for API routes
- Built-in preview deployments
- Easy environment variables and secrets management
- Good free tier, reasonable pricing

**Architecture Diagram:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                         â”‚
â”‚                     (https://pm.yourdomain.com)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ TLS 1.3
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VERCEL (Edge Network)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Next.js Frontend (React)                 â”‚  â”‚
â”‚  â”‚  â€¢ Dashboard, Task Queue, Activity Stream            â”‚  â”‚
â”‚  â”‚  â€¢ Real-time updates via WebSocket                   â”‚  â”‚
â”‚  â”‚  â€¢ Client-side encryption for sensitive data         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Next.js API Routes (Serverless)             â”‚  â”‚
â”‚  â”‚  â€¢ /api/projects (CRUD)                              â”‚  â”‚
â”‚  â”‚  â€¢ /api/tasks (approval workflow)                    â”‚  â”‚
â”‚  â”‚  â€¢ /api/agent (trigger, status)                      â”‚  â”‚
â”‚  â”‚  â€¢ /api/auth (NextAuth.js)                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATABASE (PostgreSQL)                    â”‚
â”‚                    (Neon/Supabase/PlanetScale)               â”‚
â”‚  â€¢ Users, Projects, Tasks, Approvals                        â”‚
â”‚  â€¢ Agent logs, Integration configs (encrypted)              â”‚
â”‚  â€¢ Artefact metadata (files stored separately)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FILE STORAGE (AWS S3 / Vercel Blob)         â”‚
â”‚  â€¢ Project artefacts (encrypted at rest)                    â”‚
â”‚  â€¢ Agent outputs (encrypted at rest)                        â”‚
â”‚  â€¢ Integration data cache (encrypted)                       â”‚
â”‚  â€¢ Encryption: AES-256, per-user keys                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AGENT RUNTIME (AWS Lambda / Render / Railway)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Proactive Agent Service                  â”‚  â”‚
â”‚  â”‚  â€¢ Monitoring loop (15 min intervals)                â”‚  â”‚
â”‚  â”‚  â€¢ Condition detection                                â”‚  â”‚
â”‚  â”‚  â€¢ Skill execution                                    â”‚  â”‚
â”‚  â”‚  â€¢ Integration polling                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Integration Hub                          â”‚  â”‚
â”‚  â”‚  â€¢ Asana, Slack, Outlook, SharePoint, Jira, GitHub   â”‚  â”‚
â”‚  â”‚  â€¢ Credentials encrypted in database                  â”‚  â”‚
â”‚  â”‚  â€¢ Secure polling and event handling                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXTERNAL INTEGRATIONS (APIs)                    â”‚
â”‚  â€¢ Asana, Slack, Outlook, SharePoint, Jira, GitHub         â”‚
â”‚  â€¢ OAuth tokens stored encrypted                            â”‚
â”‚  â€¢ Read-only or write-with-approval                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 13.2 Security Architecture

#### 13.2.1 Authentication and Authorization

**Authentication:** NextAuth.js

- OAuth 2.0 with Google Workspace or Microsoft 365
- Email domain restriction (e.g., only @bcmgroup.com.au)
- Multi-factor authentication (MFA) recommended
- Session management with secure HTTP-only cookies

**Authorization:** Role-based access control (RBAC)

**Roles:**
- **Owner:** Full access (you)
- **Admin:** Can manage projects, approve tasks
- **Viewer:** Read-only access to project data
- **Agent:** System role for autonomous actions (limited scope)

**Per-project permissions:**
- Owner can invite collaborators
- Collaborators have project-scoped access
- No cross-project data leakage

#### 13.2.2 Encryption

**In Transit:**
- TLS 1.3 for all connections
- Vercel provides automatic HTTPS
- Certificate auto-renewal

**At Rest:**

**Database:**
- PostgreSQL connection over SSL
- Sensitive fields encrypted at application layer
  - Integration credentials (OAuth tokens, API keys)
  - User email addresses
  - Project names (if highly confidential)
- Encryption: AES-256-GCM
- Encryption keys stored in Vercel environment variables (or AWS KMS)

**File Storage (S3 or Vercel Blob):**
- Server-side encryption (SSE-S3 or SSE-KMS)
- Per-user encryption keys (optional, for maximum security)
- Files encrypted before upload from agent
- Decryption only when user requests file

**Encryption Key Management:**

**Option A: Vercel Environment Variables (simpler)**
- Master encryption key stored as Vercel secret
- Rotated manually if compromised
- Good for single-user or small team

**Option B: AWS KMS (enterprise-grade)**
- Encryption keys managed by AWS KMS
- Automatic rotation, audit logging
- Per-user data encryption keys (DEK) encrypted by master key (KEK)
- Better for multi-user or compliance requirements

#### 13.2.3 Data Isolation

**Per-user isolation:**
- Database queries always filtered by user_id
- File storage paths include user_id prefix
- No shared data between users unless explicitly granted

**Per-project isolation:**
- Projects scoped to owner
- Artefacts tagged with project_id
- Agent can only access projects user owns or has permission for

**Multi-tenancy model:**
- Soft multi-tenancy (shared database, separate rows)
- Consider hard multi-tenancy (separate schemas) for enterprise

#### 13.2.4 Secrets Management

**Integration credentials:**
- Stored encrypted in database
- Decrypted only when agent needs to poll integration
- Never sent to frontend
- Revocable via UI

**API keys and tokens:**
- Vercel environment variables for application secrets
- Never committed to Git
- Different keys for dev/staging/production

**Audit logging:**
- All credential access logged
- Integration API calls logged (what, when, which user)
- Review logs for suspicious activity

### 13.3 Database Schema

**PostgreSQL schema (key tables):**

```sql
-- Users
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(255),
  role VARCHAR(50) DEFAULT 'owner', -- owner, admin, viewer
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Projects
CREATE TABLE projects (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  owner_id UUID REFERENCES users(id) ON DELETE CASCADE,
  name VARCHAR(255) NOT NULL,
  status VARCHAR(50) DEFAULT 'active', -- active, dormant, archived
  health VARCHAR(50), -- green, amber, red
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Project collaborators (for shared projects)
CREATE TABLE project_collaborators (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  role VARCHAR(50), -- admin, viewer
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(project_id, user_id)
);

-- Artefacts (metadata only, content in S3/Blob)
CREATE TABLE artefacts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  name VARCHAR(255) NOT NULL, -- e.g., 'raid_log.md'
  category VARCHAR(50), -- strategic, risk, delivery, decisions, etc.
  file_path TEXT, -- S3/Blob path (encrypted)
  file_size INT,
  last_updated TIMESTAMP,
  last_updated_by UUID REFERENCES users(id),
  status VARCHAR(50), -- current, stale, warning
  created_at TIMESTAMP DEFAULT NOW()
);

-- Tasks (agent outputs awaiting approval)
CREATE TABLE tasks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  skill VARCHAR(100), -- e.g., 'risk_escalation'
  priority VARCHAR(10), -- P0, P1, P2, P3
  status VARCHAR(50) DEFAULT 'pending', -- pending, approved, rejected, auto_executed
  output_path TEXT, -- S3/Blob path to generated output
  summary TEXT, -- Brief description for UI
  created_at TIMESTAMP DEFAULT NOW(),
  reviewed_at TIMESTAMP,
  reviewed_by UUID REFERENCES users(id),
  review_notes TEXT
);

-- Agent Actions (audit log)
CREATE TABLE agent_actions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  trigger_id VARCHAR(100), -- e.g., 'high_risk_added_v1.1'
  skill VARCHAR(100),
  priority VARCHAR(10),
  context_read TEXT[], -- Array of files read
  action_taken TEXT,
  output_path TEXT,
  status VARCHAR(50), -- executed, pending_approval, approved, rejected
  execution_time_seconds INT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Integration Configs (encrypted credentials)
CREATE TABLE integration_configs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  integration VARCHAR(50), -- asana, slack, outlook, etc.
  enabled BOOLEAN DEFAULT true,
  credentials TEXT, -- Encrypted JSON blob
  settings JSONB, -- Config options (poll interval, channels, etc.)
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Agent Config (per-project)
CREATE TABLE agent_configs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  monitoring_active BOOLEAN DEFAULT true,
  interval_minutes INT DEFAULT 15,
  autonomy_level JSONB, -- {auto_execute_low_stakes: true, ...}
  notifications JSONB, -- {immediate_channel: "slack_dm", ...}
  learning_enabled BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Trigger Conditions (per-project)
CREATE TABLE trigger_conditions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  trigger_id VARCHAR(100) UNIQUE,
  enabled BOOLEAN DEFAULT true,
  condition JSONB, -- Condition definition
  action JSONB, -- Action definition
  metadata JSONB, -- false_positive_rate, executions, etc.
  version VARCHAR(20),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Indexes for performance
CREATE INDEX idx_projects_owner ON projects(owner_id);
CREATE INDEX idx_artefacts_project ON artefacts(project_id);
CREATE INDEX idx_tasks_project_status ON tasks(project_id, status);
CREATE INDEX idx_agent_actions_project ON agent_actions(project_id);
CREATE INDEX idx_integration_configs_user_project ON integration_configs(user_id, project_id);
```

### 13.4 File Storage Strategy

**AWS S3 (recommended) or Vercel Blob**

**S3 Bucket Structure:**

```
pm-workbench-prod/
  users/
    {user_id}/
      projects/
        {project_id}/
          strategic/
            project_brief.md.enc
            stakeholders.md.enc
          risk/
            raid_log.md.enc
            dependencies.md.enc
          delivery/
            roadmap.md.enc
            delivery_state.md.enc
            backlog.md.enc
          decisions/
            decisions.md.enc
            adrs/
              001-architecture-choice.md.enc
          outputs/
            status_reports/
              exec_2025-02-03.md.enc
            escalations/
              risk_2025-02-03_api-vendor-eol.md.enc
          agent/
            action_log.md.enc
            learning.md.enc
          archive/
            (archived artefacts)
```

**.enc = encrypted files**

**Encryption process:**

1. Agent generates artefact (e.g., status report)
2. Encrypt file using AES-256-GCM with user's data encryption key (DEK)
3. Upload encrypted file to S3
4. Store file path in database (artefacts table)
5. When user requests file:
   - Fetch encrypted file from S3
   - Decrypt using user's DEK
   - Return plaintext to frontend (over TLS)

**Alternative: Vercel Blob**

- Similar encryption approach
- Simpler setup (integrated with Vercel)
- Potentially higher cost at scale
- Consider for MVP, migrate to S3 if needed

### 13.5 Real-Time Updates

**WebSocket connection for live activity stream**

**Options:**

**Option A: Vercel + Pusher (simplest)**
- Pusher provides WebSocket infrastructure
- Vercel API routes trigger Pusher events
- Frontend subscribes to channels
- Good for MVP

**Option B: Vercel + Ably**
- Similar to Pusher, more features
- Better presence tracking

**Option C: Custom WebSocket server**
- Run separate WebSocket server (e.g., on Railway)
- More control, more complexity

**Recommended for MVP: Pusher**

**Implementation:**

```javascript
// Backend (Vercel API route)
import Pusher from 'pusher';

const pusher = new Pusher({
  appId: process.env.PUSHER_APP_ID,
  key: process.env.PUSHER_KEY,
  secret: process.env.PUSHER_SECRET,
  cluster: process.env.PUSHER_CLUSTER,
  useTLS: true
});

// When agent executes action
export default async function handler(req, res) {
  const { userId, projectId, action } = req.body;
  
  // Trigger real-time event
  await pusher.trigger(`project-${projectId}`, 'agent-action', {
    action: action,
    timestamp: new Date().toISOString()
  });
  
  res.status(200).json({ success: true });
}
```

```javascript
// Frontend (React)
import Pusher from 'pusher-js';

useEffect(() => {
  const pusher = new Pusher(process.env.NEXT_PUBLIC_PUSHER_KEY, {
    cluster: process.env.NEXT_PUBLIC_PUSHER_CLUSTER,
  });
  
  const channel = pusher.subscribe(`project-${projectId}`);
  
  channel.bind('agent-action', (data) => {
    // Update UI with new action
    addToActivityStream(data.action);
  });
  
  return () => {
    channel.unbind_all();
    channel.unsubscribe();
  };
}, [projectId]);
```

### 13.6 Agent Runtime Hosting

**Agent needs to run continuously, separate from Vercel.**

**Options:**

**Option A: AWS Lambda (serverless)**
- Pros: Scales automatically, pay per execution
- Cons: 15-minute max execution time (need to break into smaller jobs)
- Use EventBridge for scheduling (every 15 minutes)

**Option B: Render (managed service)**
- Pros: Simple deployment, persistent processes, reasonable pricing
- Cons: Not serverless (always running, higher idle cost)
- Good for agent that needs continuous monitoring

**Option C: Railway**
- Pros: Similar to Render, good DX, free tier available
- Cons: Smaller company, less mature

**Option D: Fly.io**
- Pros: Global edge deployment, good for low-latency
- Cons: More DevOps complexity

**Recommended: Render for MVP, AWS Lambda for scale**

**Agent deployment on Render:**

1. Create Docker container with agent code
2. Push to Render
3. Set environment variables (DB connection, S3 credentials, integration tokens)
4. Agent runs continuously, polls projects every 15 minutes
5. Communicates with Vercel backend via API

**Architecture:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RENDER (Agent Runtime)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Agent Service (Node.js / Python)                    â”‚  â”‚
â”‚  â”‚  â€¢ Monitoring loop (every 15 minutes)                â”‚  â”‚
â”‚  â”‚  â€¢ Reads project configs from DB                     â”‚  â”‚
â”‚  â”‚  â€¢ Polls integrations (Asana, Slack, etc.)           â”‚  â”‚
â”‚  â”‚  â€¢ Detects trigger conditions                        â”‚  â”‚
â”‚  â”‚  â€¢ Executes Skills (calls Claude API)                â”‚  â”‚
â”‚  â”‚  â€¢ Writes outputs to S3                              â”‚  â”‚
â”‚  â”‚  â€¢ Updates DB (tasks, agent_actions)                 â”‚  â”‚
â”‚  â”‚  â€¢ Triggers Pusher events for real-time UI           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”œâ”€> PostgreSQL (project configs, tasks)
                         â”œâ”€> S3 (artefacts, outputs)
                         â”œâ”€> Claude API (Skill execution)
                         â”œâ”€> Integrations (Asana, Slack, etc.)
                         â””â”€> Pusher (real-time events)
```

### 13.7 Deployment Pipeline

**CI/CD with GitHub Actions**

**Vercel (Frontend + API):**
- Push to `main` â†’ Auto-deploy to production
- Push to feature branch â†’ Preview deployment
- Environment variables managed in Vercel dashboard

**Render (Agent):**
- Push to `main` â†’ Auto-deploy agent service
- Environment variables managed in Render dashboard

**Database migrations:**
- Use Prisma or similar ORM
- Migrations run automatically on deploy

**Secrets rotation:**
- Rotate encryption keys quarterly
- Rotate integration tokens when compromised
- Update Vercel/Render environment variables

### 13.8 Cost Estimate (Monthly)

**Vercel:**
- Pro plan: $20/month (unlimited team members)
- Bandwidth and function executions: ~$10-30/month (depending on usage)

**Database (Neon/Supabase):**
- Starter: $25/month (8GB storage, backups)
- Pro: $90/month (if scaling)

**File Storage (AWS S3):**
- Storage: ~$0.50/month (20GB assuming 10 projects)
- Requests: ~$1/month
- Data transfer: ~$2/month

**Real-time (Pusher):**
- Free tier: 200k messages/day (sufficient for MVP)
- Paid: $49/month if exceeding free tier

**Agent Runtime (Render):**
- Starter: $7/month (512MB RAM)
- Standard: $25/month (2GB RAM, likely needed)

**Claude API:**
- Depends on usage
- Estimate: $50-200/month (depending on Skill execution frequency)

**Total estimated cost:**
- **MVP (single user):** ~$150-200/month
- **Production (small team, 5-10 users):** ~$300-400/month
- **Scale (enterprise, 50+ users):** ~$1000+/month

### 13.9 Compliance and Regulatory

**For Australian context (Privacy Act):**
- User data stored in Australia or EU region (if possible)
- Privacy policy and terms of service
- Data export and deletion capability
- Consent for data processing

**GDPR compliance (if EU users):**
- Data processing agreement
- Right to access, rectify, delete data
- Data breach notification

**Security certifications (if enterprise customers):**
- SOC 2 Type II (Vercel, Render, AWS are certified)
- ISO 27001

### 13.10 Disaster Recovery and Backup

**Database backups:**
- Neon/Supabase: Automatic daily backups
- Retention: 7 days (configurable)
- Point-in-time recovery available

**File storage backups:**
- S3 versioning enabled
- Cross-region replication (optional, for high availability)
- Lifecycle policies to archive old files

**Disaster recovery plan:**
1. If database fails: Restore from latest backup (max 24h data loss)
2. If S3 fails: AWS guarantees 99.999999999% durability
3. If Vercel fails: Redeploy to alternative provider (Netlify, etc.)
4. If agent fails: Restart service, resume from last checkpoint

**Monitoring and alerts:**
- Vercel: Built-in error tracking
- Render: Health checks and alerts
- Sentry for application error monitoring
- PagerDuty for critical alerts (optional)

---

## 14. Implementation Plan for Web Interface + Hosting

### Phase 1: MVP (Weeks 1-4)

**Week 1: Setup and Auth**
1. Initialize Next.js project
2. Deploy to Vercel
3. Set up NextAuth.js (Google OAuth)
4. Create PostgreSQL database (Neon)
5. Set up S3 bucket with encryption
6. Basic user authentication and session management

**Week 2: Core UI**
1. Dashboard view (project list, pending approvals)
2. Task queue view (Kanban or table)
3. Agent activity stream (read-only, from DB)
4. Basic styling (Tailwind CSS)

**Week 3: Approval Workflow**
1. Task detail view
2. Approve/reject actions
3. Edit and approve flow
4. Update database on approval
5. Download/view generated outputs from S3

**Week 4: Real-Time Updates**
1. Integrate Pusher
2. Live activity stream updates
3. Toast notifications for new tasks
4. Polish UI/UX

### Phase 2: Agent Integration (Weeks 5-8)

**Week 5: Agent Runtime**
1. Set up Render service
2. Deploy agent code (monitoring loop)
3. Connect to database and S3
4. Test trigger detection and Skill execution

**Week 6: Integration Hub**
1. Implement first integration (Slack)
2. OAuth flow for user to connect Slack
3. Store credentials encrypted in DB
4. Agent polls Slack, detects conditions

**Week 7: End-to-End Testing**
1. Trigger agent action (e.g., high risk detected)
2. Agent generates output, saves to S3
3. Task appears in UI
4. User approves in UI
5. Validation and bug fixes

**Week 8: Additional Integrations**
1. Asana integration
2. Outlook integration (read-only)
3. Test full workflow with real projects

### Phase 3: Polish and Scale (Weeks 9-12)

**Week 9: UI Enhancements**
1. Project view (artefact explorer)
2. Filters and search
3. Bulk actions
4. Mobile responsive design

**Week 10: Security Hardening**
1. Penetration testing
2. Audit logging review
3. Encryption validation
4. Secrets rotation process

**Week 11: Performance Optimization**
1. Database query optimization
2. File caching strategy
3. CDN configuration
4. Load testing

**Week 12: Documentation and Launch**
1. User documentation
2. Admin documentation
3. Security documentation
4. Soft launch with pilot project

---

## 15. Critical Considerations

### 15.1 Confidentiality in Cloud Environment

**Key concern:** Project artefacts may contain highly confidential client information, strategic plans, financial data.

**Mitigations:**
- Encryption at rest (S3, database)
- Encryption in transit (TLS 1.3)
- Per-user encryption keys (user can't decrypt other users' data)
- Access logging (who accessed what, when)
- No third-party analytics or tracking on sensitive pages
- Compliance with data residency requirements (Australian data stays in Australia)

**Additional options for extreme confidentiality:**
- **Self-hosted option:** Run entire stack on your own infrastructure (AWS EC2, etc.)
- **End-to-end encryption:** Encrypt data in browser before sending to server (server never sees plaintext)
- **Zero-knowledge architecture:** Server stores encrypted data, user holds decryption keys locally

### 15.2 Agent Autonomy vs Control

**Balance required:** Agent should be proactive but not overstep.

**Design principles:**
- Start conservative, increase autonomy over time
- Always log agent actions (audit trail)
- Hard approval gates for high-stakes actions (external communication, financial decisions)
- User can pause or disable agent at any time
- Clear visual indicators when agent is acting autonomously

### 15.3 Scalability

**Current design supports:**
- 1-10 users: Easily
- 10-50 users: With current architecture
- 50-500 users: May need database scaling, caching layer
- 500+ users: Requires re-architecture (multi-region, sharding, etc.)

**Scaling triggers:**
- Database connections: Add read replicas
- File storage: S3 scales automatically
- Agent runtime: Add more Render instances, load balance
- API throughput: Vercel scales automatically

### 15.4 Cost Management

**Cost optimization strategies:**
- Use S3 Intelligent-Tiering for artefacts (auto-moves to cheaper storage if not accessed)
- Implement caching to reduce Claude API calls
- Batch agent actions (don't poll integrations too frequently)
- Monitor Vercel function execution time (optimize slow routes)

---

## 16. Summary and Next Steps

This specification provides a complete blueprint for:

1. **Web interface** with Dashboard, Task Queue, Activity Stream, Project View, and Approval Workflow
2. **Cloud hosting on Vercel** with Next.js frontend and serverless API
3. **Agent runtime on Render** with continuous monitoring and Skill execution
4. **Security architecture** with encryption, auth, and audit logging
5. **Database schema** for projects, tasks, artefacts, agent actions
6. **File storage strategy** with S3 encryption
7. **Real-time updates** via Pusher
8. **Integration hub** for Asana, Slack, Outlook, etc.
9. **Implementation roadmap** across 12 weeks

**Immediate next steps:**

1. Set up Vercel account and deploy basic Next.js app
2. Create Neon PostgreSQL database
3. Set up AWS S3 bucket with encryption
4. Implement basic authentication (NextAuth.js)
5. Build dashboard view (MVP)
6. Deploy agent runtime to Render (monitoring loop only, no Skills yet)
7. Test end-to-end: Agent detects condition â†’ Creates task â†’ Shows in UI â†’ User approves

**Decision points:**

- **Vercel vs self-hosted:** Vercel recommended for simplicity, self-hosted if extreme control required
- **S3 vs Vercel Blob:** S3 recommended for flexibility and cost at scale
- **Render vs AWS Lambda:** Render for MVP, Lambda if scaling to many projects
- **Pusher vs custom WebSocket:** Pusher for simplicity, custom if cost becomes issue

**This spec is ready to be used alongside the main system spec (sections 1-11) as complete context for building the PM Workbench.**